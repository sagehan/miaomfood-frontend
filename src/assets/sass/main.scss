@import "variables";
@import '~normalize.css/normalize';

// global //////////////////////////////////////////////////////////////////////////////////
@font-face {
	font-family: 'HanziPen SC';
	src: local('HanziPen SC');
	src: local('HanziPenSC-W3');
}

@font-face {
	font-family: 'Lucida Grande';
	src: local('Lucida Grande');
}

@font-face {
	font-family: 'icomiaomfood';
	src: url(~assets/fonts/icomiaomfood.woff);
}

* { 
	-webkit-margin-before: 0;
	-webkit-margin-after : 0;
	-webkit-margin-start : 0;
	-webkit-margin-end   : 0;
	box-sizing 			 : border-box ;
}

button,
input,
optgroup,
select,
textarea,
ul,
ol, {
	padding: 0;
}

::selection { color: white; background: $primary_cl; }

ul { list-style-type: none; margin:0; padding: 0; }

body {
	background-color: $page-bg; 
	font-family: Helvetica, sans-serif; 

	//test below
	//position    : fixed; //for fixed cart on top, but not have fun at all
	//overflow 	: hidden; //for fixed cart on top
}

main { width: 100%; margin-top: 1em; }

footer {
	padding 	: 1em;
	line-height : #{$row_height/$rem_size};
	color 		: adjust-color($black, $alpha: -0.65);
	font-weight : 200;
	text-transform: capitalize; 

	a:link { color: inherit; text-decoration: none; }
	a:hover{ color: $black; font-weight: bold; }
}

h1 { margin: 0; }

// mixin 
@mixin absolutly__centered {
	position: absolute;
	top 	: 50%;
	left 	: 50%;
	transform: translate(-50%, -50%);
}

@mixin absoutly__hidden {
	position: absolute;
	overflow: hidden;
	clip 	: rect(0 0 0 0);
	height 	: 1px;
	width 	: 1px;
	margin 	: -1px;
	border 	: 0;
	padding : 0;
	white-space: nowrap; 
}

@mixin box__shadow {
	box-shadow: 
		1px -1px 3px $shadow_bg, 
		1px 1px 3px $shadow_bg, 
		inset 0 0 3em rgba(0, 0, 0, 0.1)
}

@mixin text__shadow {
	text-shadow:
		rgba(0,0,0,0.1) -1px 0, 
		rgba(0,0,0,0.1) 0 -1px,
		rgba(255,255,255,0.1) 1px 0, 
		rgba(255,255,255,0.1) 0 1px,
		rgba(0,0,0,0.1) -1px -1px, 
		rgba(255,255,255,0.1) 1px 1px;  
}

@mixin bubble__gradient {}

@mixin pricetag {
	content : "✓";
	display : inline-block;
	position: absolute;
	width 	: 1em;
	height 	: #{($row_height - 6px)/14px}em;
	padding : 0 0.25em;
	font 	: #{(14px/12px)}em/#{(($row_height - 6px)/14px)} "Lucida Grande";
	border 	: 1px solid $tag-border_color;
	word-spacing: 0;
	color 	: white;
	background-color: $tag-border_color;
}

@mixin pricetag__leading {
	@include pricetag;
	left 	: 0;
	bottom 	: -1px;
	transform: translateX(-100%);
	border-bottom-left-radius: 2em;
	border-top-left-radius: 2em;
}

@mixin pricetag__trailing { 
	@include pricetag;
	right 	: 0;
	bottom 	: -1px;
	transform: translateX(100%);
	border-bottom-right-radius: 2em;
	border-top-right-radius: 2em;
}

.u-hidden { @include absoutly__hidden; }
.tasty, .tasty .sub-drawers { background-color: $tasty-bg; 		 &:after { background: $tasty_bg !important;} }
.drink, .drink .sub-drawers { background-color: $drink_bg;  	 &:after { background: $drink_bg !important;} }
.lazycat, .lazycat .sub-drawers { background-color: $lazycat_bg; &:after { background: $lazycat_bg !important;} }

// cart ///////////////////////////////////////////////////////////////////////////////////
#cart {
	position: relative;
	z-index : 10;
	width 	: calc(100% - 1em);
	height 	: calc(100vh - #{$topbar_ht} - #{$row_height/$rem_size}em);
	margin 	: 0 auto;
	overflow: scroll;
	border-top: 0;
	@include box__shadow;
	background-color: white;
	font-family: "HanziPen Sc";
	line-height: #{$row_height/$rem_size}em;

	&:before {
		content : "";
		display : block;
		width 	: 100%;
		height 	: 0.5rem;
	    background-size	 : 0.5rem 0.5rem;
		background-image : radial-gradient( 6px at top  center, $shadow_bg 0, grey 3px, transparent 3px); 
	    background-repeat: repeat-x;
	}

	header {
		margin  : #{$row_height/$rem_size}em 1rem;
		text-align: center;

		h1 { font: #{24px/$rem_size}em/#{(42px/24px)} "HanziPen SC";}
	}
}

.non-empty-cart {
	margin: auto 1rem;

	table.cart-items {
		width : 100%;
		margin: #{$row_height/$rem_size}em auto #{$row_height/$rem_size}em;
		border-collapse	: collapse;
		//table-layout	: fixed;
		text-align 		: left;
		line-height 	:  #{($row_height - 2px)/$rem_size}em;

		thead, tbody { border-bottom: 1px solid $border_bg; }
		th:last-child, td:last-child:not(:only-child) { text-align: right; }

		th { 
			font-size: #{$small_size/$rem_size}em;
			line-height: #{($row_height -2px)/$small_size}em;
			color: $border_bg;
			white-space: nowrap;
		}
	}

	fieldset { border-width: 0; padding: 0; }

	input {
		font-family : "HanziPen SC";
		border-width: 0;
	 	border-bottom: 1px dashed $border_bg;
	 	background-color: transparent;

	 	&.coupon-input { width: 8em; }
	 	&.comment-input { 
			width: 100%;
			margin-top: 1em;
			padding: 0.3em  0.2em;
			overflow: hidden;
			border-width: 0;
			border-bottom: 1px solid $border_bg;
		}

		&:not(:checked) + label + .reservation-option { @include absoutly__hidden; }
	}

	label {
		display:block;
		width: 100%;

		&[for="comment"] { @include absoutly__hidden; }

		.required { 
			font-weight : 800;
			color 		: $primary_cl;
			margin-left : 0.25em;
		}
	}
}

// topbar ///////////////////////////////////////////////////////////////////////////////////
@media screen and (max-width: 400px) and (orientation: portrait) {
	#topbar .h-card .p-name { position: absolute; left:-9999999px; top: -99999999px; }
}

@media screen and (max-width: 640px) {
	#topbar .h-card .p-slogan { position: absolute; left:-9999999px; top: -99999999px; }
}
#topbar {
	display : flex;
	position: absolute;
	z-index : 10;
	width 	: 100%;
	height 	: $topbar_ht;
	margin 	: #{$row_height/$rem_size}em auto;
	padding : 0 1em;
	align-items: center;
	justify-content: space-between;

	h1.h-card {
		position 	: relative;
		height 		: 42px;
		display		: inline-flex;
		font-size 	: #{24px/$rem_size}em;
		line-height	: #{(42px/24px)};
		align-items : center;

		color: white; 

		a:any-link { color: initial; text-decoration: none; }

		.u-logo { 
			//width: percentage(84px/$canvas_width); 
			max-width: 2.5em;
			margin-right: 0.5em;
			border-radius: 100%;
			background: white;//$primary_cl;
		}
		.p-name { flex-shrink: 0; }
		.p-slogan { 
			text-indent  : 0.25em; 
			font-size 	 : #{$rem_size/24px}em;
			font-weight  : 300; 
			white-space  : nowrap;
			overflow 	 : hidden;
			text-overflow: clip;
		}
	}

	.toggle { 
		flex-shrink: 0;
		z-index: 4;

		a { 
			display: inline-block;
			margin-left: 0.5em;
			color: white;
			text-decoration: none; 

			.no-touch &:hover { 
				color: $primary_cl;
				@include text__shadow;
			}
		}

		&--cart,&--vip { 
			display: table-cell;
			width: #{2*18px/$rem_size}em;
			height: #{2*18px/$rem_size}em;
			border : 1px solid $primary_cl;
			border-radius: 100%;
			text-align: center; 
			vertical-align: middle;
			&:before { font: #{18px/$rem_size}em "icomiaomfood"; } 
		}
		&--cart:before { content: "\e917"; }
		&--vip:before { content: "\e92f"; }
	}
}

// coverstory ////////////////////////////////////////////////////////////////////////////////
#storyboard {
	position: relative;
	width 	: 100%;
	height 	: 100vh;
	min-height: $min_cover_ht;

	&:after,
	&:before {
		content : "";
		display : block;
		position: absolute;
		width 	: 100%;
		height 	: $rem_size;
		background: url(~assets/imgs/cover-bottom-texture.png) top left/cover;
	}
	&:before {
		top:  0;
		transform: rotateX(180deg) rotateY(180deg) rotateZ(-0.35deg) translateY(70%);
		z-index: 2;
	}
	&:after { bottom: 0; }
}

.slideshow  {
	//position: relative;
	width: 100%;
	height: 100%;
	min-height: $min_cover_ht;

	.slide {
		position: absolute;
		width: 100%;
		height: 100%;
		min-height: $min_cover_ht;
		background-image: url(~assets/imgs/cover.jpg);
		background-size: cover;
		z-index: 0;

		html.no-touch & { background-attachment: fixed; }
	}
}

// menu //////////////////////////////////////////////////////////////////////////////////
#menu {
	position: absolute;
	left: 50%;
	transform: translate(-50%, -100%);
	width: percentage($menu_width/$layout_width);
	z-index : 2;

	a { 
		display: inline-block;
		width: 100%;
		height: #{42px/$rem_size}em;
		line-height: #{42px/$rem_size}; 
		color: initial; text-decoration: none; 
	}

	.category-drawers {
		margin : 1em auto;
		display : flex;
	}

	.drawer-item {
		position: relative;
		max-width: 100%;
		flex-basis: 100%;
		flex-shrink: 1;
		border-bottom: 1px solid $black;
		text-align: center;
		opacity: 0.9;
		transition: background-color .5s ease;

		.no-touch &:hover .sub-drawers { visibility: visible; }
	}

	.sub-drawers {
		visibility: hidden;
		position: absolute;
		width 	: 100%;
		bottom 	: #{42px/$rem_size}em;

		.sub-drawer-item a { font-family: "HanziPen SC"; } 
	}

	.category { font: #{24px/$rem_size}em/#{(42px/24px)} "HanziPen SC"; }
	
}

.p-category, 
.category h1 {
	width: 100%;
	font: #{24px/$rem_size}em/#{(42px/24px)} "HanziPen SC";
	text-align: center;
	vertical-align: middle;
	cursor    : pointer;
}

// main ///////////////////////////////////////////////////////////////////////////////////
#pizza, #rice, #snack, #coffee, #black-tea, #ice-tea { 
	margin-top: #{2*$row_height/$rem_size}em;
	padding-bottom: 1em; 
	flex-grow: 1;
 }

#tasty, 
#drink,
#lazycat {
	position: relative;
	margin-bottom: #{2*$row_height/$rem_size}em;
	@include box__shadow;

	&:before {
		content: "▾";
		display: block;
		color: adjust-color($shadow_bg, $lightness: -10%);
		text-shadow: 3px -1px 3px 3px $page_bg;
		font-size: 2em;
		line-height: 0.25;
		text-align: center;
		flex-basis: 100%; // special for media queries
	}
	&:after {
		content: "";
		position: absolute;
		width: 40%;
		height: 1em;
		right: 0.25em;
		bottom: 0.75em;
		background: $page_bg;
		box-shadow: 0 0.5em 1em rgba(0, 0, 0, 0.3);
		transform: skew(5deg) rotate(5deg);
		z-index: -1;
	}
}

@media screen and (min-width: 640px) {
	#drink  { 
		display: flex;
		flex-wrap: wrap;
		justify-content: space-around;
		//align-items: baseline;

		.category { min-width: 320px; }
	}
}

@media screen and (min-width: 960px) {
	#tasty, #drink, #lazycat {
		
	}
	div.group {
		//width : percentage($group_width/(3*$layout_width)) !important;
		//margin: #{(2*$row_height/16px)}em auto !important;
	}
}
#lazycat div.illustration,
#snack 	div.group,
#rice 	div.group,
#pizza 	div.group {
	position: relative;
	width : percentage($group_width/$layout_width);
	margin: #{(2*$row_height/16px)}em auto;

	.p-name {
		width 			: #{24px/$rem_size}em;
		min-height		: #{5*$row_height/18px}em;
		padding 		: #{($row_height/2/18px)}em #{($row_height/4/18px)}em;
		font 			: #{18px/$rem_size}em/#{($row_height/18px)} "HanziPen SC";
		//writing-mode 	: vertical-rl;
		text-align		: center;
		vertical-align	: middle;
		box-shadow		: inset 1px 1px 3px $shadow_bg;
		background-color: $page_bg;
		box-sizing 		: content-box;
	}

	.spec-tag { 
		-webkit-padding-start: 0;
		padding : 0;
		width 	: -webkit-max-content;
		width 	: -moz-max-content;
		height 	: -webkit-max-content;
		height  : -moz-max-content;
		color 	: $tag-border_color;
		font  	: #{$small_size/$rem_size}em/#{(($row_height - 5px)/$small_size)} -apple-system, BlinkMacSystemFont, 'Microsoft YaHei', Helvetica, sans-serif;
	}

	.p-spec {
		position  : relative;
		-webkit-margin-after: #{$row_height/2/12px}em;
		margin-bottom: 8px;
		padding: 0 0.3em;
		outline   : 1px dashed $tag-border_color;
		word-break: keep-all;
	}
	.p-spec.isSelected { outline-style: solid; }

	.e-description { 
		position	: absolute;
		top: 0;
		margin-top: -3em;
		padding-top: 0.5em;
		font 		: #{$small_size/$rem_size}em/#{($row_height/$small_size)} "HanziPen SC"; 
		white-space : nowrap;
		word-break 	: keep-all;
	}
}

// drink ///////////////////////////////////////
#pizza div.group {
	border: 1.5px dashed $border_bg; 

	&:after,
	&:before {
		content: "";
		display: block;
		position: absolute;
		width: percentage((4*$column_width + 3*$gutter_width)/$group_width);
	}

	.spec-tag { 
		position  : relative;
		margin-top: -#{((2*$row_height - 3px + $row_height/2)/12px)}em;
	}

	figure { 
		display: block;
		position: relative; 
		margin: 3em auto 0; 
		width: #{153px/$rem_size}em;
		height: #{153px/$rem_size}em;

		.u-photo {
			display: block;
			width : 140px;
			height 		: auto;
			@include absolutly__centered;
			z-index: 9999;
			/*shape-outside: circle();*/
		}

		&:after,
		&:before {
			content: "";
			display: block;
			width  : 100%;
			height : 100%; 
			@include absolutly__centered;
			background-color: white;
			border-radius: 100%;
		}
		&:after {
			width: 140px;
			height: 140px;
			box-shadow: 1px 1px 1px 1px adjust-color($shadow_bg, $alpha: -0.5);
		}
		&:before { box-shadow: 1px 2px 1px 1px adjust-color($shadow_bg, $alpha: -0.5); }
	}
}

#pizza div.twins {
	display	  : flex;
	flex-wrap : nowrap;
	justify-content: space-between;
	margin: #{(4*$row_height/16px)}em auto;

	.h-product {
		width: 49%;

		&:nth-child(odd) {
			.p-name { transform: translateX(-100%); }
			.p-spec.isSelected:after { @include pricetag__trailing; }

			figure {
				margin-left: -3em;

				.e-description { 
					margin-left: 1em;
					transform: translateX(#{$column_width + 2*$gutter_width}) rotate(15deg); 
				}
			}
		}

		&:nth-child(even) { 
			.p-name { position: relative; right: -100%; }
			.spec-tag {right: -100%; transform: translateX(-100%); }
			.p-spec.isSelected:before { @include pricetag__leading; }

			figure {
				margin-right: -3em;

				.e-description { 
					right: 0;
					margin-right: 1em;
					transform: translateX(-#{$column_width + 2*$gutter_width}) rotate(-15deg); 
				}
			}
		}
	}

	&:nth-of-type(1) article.h-product:nth-child(1),
	&:nth-of-type(2) article.h-product:nth-child(2),
	&:nth-of-type(3) article.h-product:nth-child(1),
	&:nth-of-type(4) article.h-product:nth-child(2), {
		-webkit-margin-before: #{(3*$row_height/16px)}em;
		margin-top 	: #{(4*$row_height/16px)}em;
		position 	:relative;
		bottom 		: -#{(1*$row_height/16px)}em;
	}

	&:nth-of-type(odd) {
		&:before {
			top: -2em;
			left: -2em;
			height: #{3*$row_height/$rem_size}em;
			transform: scale(1.35, 1.35);
		}

		&:after {
			bottom: 0;
			right: 0;
			height: #{2*$row_height/$rem_size}em;
			transform: translate(50%, 50%);
			background-color:  $tasty_bg;
		}

		article.h-product:after {
			content: "";
			display: block;
			position: absolute;
			bottom: 0;
			left: 100%;
			width: 2*($column_width+$gutter_width);
			height: #{2*$row_height/$rem_size}em;
		}
	}

	&:nth-of-type(even) {
		&:before {
			top: -2em;
			right: -2em;
			height: #{3*$row_height/$rem_size}em;
			transform: scale(1.35, 1.35);
		}

		&:after {
			bottom: 0;
			left: 0;
			height: #{2*$row_height/$rem_size}em;
			transform: translate(-50%, 50%);
			background-color:  $tasty_bg;
		}

		article.h-product:after {
			content: "";
			display: block;
			position: absolute;
			bottom: 1em;
			left: 0;
			width: 2*($column_width+$gutter_width);
			height: #{2*$row_height/$rem_size}em;
		}
	}

	&:nth-of-type(1) {
		&:before { background: url(~assets/imgs/bacon.png) left top/contain no-repeat content-box;}

		article.h-product:nth-child(1):after {
			transform: scale(1.15, 1.15);
			background: url(~assets/imgs/yuangu.png) left top/contain no-repeat content-box;
		}
		article.h-product:nth-child(2):after {
			transform: translate(-50%, -50%) scale(1.5, 1.5);
			background: url(~assets/imgs/pineapple.png) left top/contain no-repeat content-box;
		}
	}

	&:nth-of-type(2) {
		&:before { background: url(~assets/imgs/beef.png) right top/contain no-repeat content-box; }

		article.h-product:nth-child(1):after {
			transform: translate(-50%, 0) scale(1.15, 1.15);
			//background: url(~assets/imgs/) left top/contain no-repeat content-box;
		}
		article.h-product:nth-child(2):after {
			transform: translate(-100%,50%) scale(1.5, 1.5);
			background: url(~assets/imgs/pepper.png) left top/contain no-repeat content-box;
		}
	}

	&:nth-of-type(3) {
		&:before { background: url(~assets/imgs/chicken.png) left top/contain no-repeat content-box; }

		article.h-product:nth-child(1):after {
			transform: scale(1.15, 1.15);
			background: url(~assets/imgs/pepper.png) left top/contain no-repeat content-box;
		}
		article.h-product:nth-child(2):after {
			transform: translate(-50%,-50%) scale(1.5, 1.5);
			background: url(~assets/imgs/yuangu.png) left top/contain no-repeat content-box;
		}
	}

	&:nth-of-type(4) {
		//&:before { background: url(~assets/imgs/chicken.png) right top/contain no-repeat content-box; }

		article.h-product:nth-child(1):after {
			transform: translate(-50%, -25%) scale(1.15, 1.15);
			background: url(~assets/imgs/huanggua.png) left top/contain no-repeat content-box;
		}
		article.h-product:nth-child(2):after {
			transform: translate(-100%, 50%) scale(1.5, 1.5);
			background: url(~assets/imgs/xia.png) left top/contain no-repeat content-box;
		}
	}
}

#pizza div.orphan { 
	article.h-product {
		position: relative;
		padding : 1em 0 3em;
		//height 	: #{8*$row_height/$rem_size}em;
	}

	&:nth-of-type(even) article.h-product {
		.p-name { transform: translateX(-100%); }
		.p-spec.isSelected:after { @include pricetag__trailing; }

		figure { 
			position: absolute;
			top: 0;
			right: 0;
			margin-right: -3em;

			.e-description { 
				right: 0;
				margin-right: 1em;
				transform: translateX(-#{$column_width + 2*$gutter_width}) rotate(-15deg); 
			}
		}
	}

	&:nth-of-type(odd) article.h-product {
		.p-name { position: relative; right: -100%; }
		.spec-tag { right: -100%; transform: translateX(-100%); }
		.p-spec.isSelected:before { @include pricetag__leading; }

		figure { 
			position: absolute;
			top: 0;
			left: 0;
			margin-left: -3em;

			.e-description { 
				margin-left: 1em;
				transform: translateX(#{$column_width + 2*$gutter_width}) rotate(15deg); 
			}
		}
	}
}

#rice div.twins:before { 
	content : "";
	display : block;
	@include absolutly__centered;
	width: 6em;
	height: 6em;
	background: url(~assets/imgs/cheese.png) left top/contain no-repeat;
}

#rice .h-product {
	position: relative;
	width : 100%;
	border: 1.5px dashed $border_bg; 

	&:before {
		content: "";
		display: block;
		width: 100%;
		padding-top: 100%;
	}

	.p-name,.spec-tag,figure { position: absolute; }
	figure { width: 60% ; margin: 0; }
	.u-photo { width: 100%; height: auto;}

	&:nth-of-type(1) {
		border-left-style: none;
		border-bottom-style: none; 
		border-top-right-radius: 50%;
		border-bottom-right-radius: 50%;

		.p-name 	{ left: 0; top: 0;  transform: translateX(-100%); }
		.spec-tag 	{ left: 0; top: #{2*$row_height/$rem_size}em; }
		.p-spec.isSelected:after { @include pricetag__trailing; }

		figure 	{ 
			right: 0; 
			top: 0; 

			.u-photo { margin-left: 2em; }
			.e-description { transform: translateX(#{$column_width + 2*$gutter_width}) rotate(-15deg); }
		}
	}
	&:nth-of-type(2) {
		border-right-style: none;
		border-top-style: none; 
		border-top-left-radius: 50%;
		border-bottom-left-radius: 50%;

		.p-name 	{ right: 0; bottom: 0; transform: translateX(100%); }
		.spec-tag 	{ right: 0; bottom: #{2*$row_height/$rem_size}em; }
		.p-spec.isSelected:after { @include pricetag__leading; }

		figure 	{ 
			bottom: 0; 
			left: 0; 

			.u-photo { margin-left: -2em; }
			.e-description { transform: translateX(#{$column_width + 2*$gutter_width}) rotate(15deg); }
		}
	}
}

#snack 	div.group { 
	margin: #{($row_height/16px)}em auto;
	min-height: #{7*$row_height/$rem_size}em;
}

#snack .h-product {
	.p-name, .spec-tag, .u-photo { position: absolute; }
	.p-name { left: 50%; transform: translateX(-50%); }

	.u-photo { 
		left: calc(50% + #{24px/$rem_size}em + 1em);
		top: 50%;
		transform: translateY(-50%);
		width: 49%;
		height: auto;
	}

	.spec-tag { 
		position: absolute;
		right: calc(50% + #{24px/2/12px}em + #{($row_height/4/12px)}em + 1px);
		top: 50%;
		transform: translateY(-50%);
	}
	.p-spec.isSelected:before { @include pricetag__leading; }
}


// drink ///////////////////////////////////////
#drink div.group {
	display: flex;
	//justify-content: space-between;
	width : percentage($drink_width/$layout_width);
	margin: #{$grid_size/$rem_size}em auto #{2*$grid_size/$rem_size}em;

	.h-product { margin-top : #{($grid_size/2/$rem_size)}em; }

 	.p-name {
 		margin			: 0; /* special for firefox */
		font 			: #{18px/$rem_size}em/#{$grid_size/18px)} "HanziPen SC";
		text-align		: center;
		vertical-align	: middle;
 	}

 	.spec-tag { 
		-webkit-padding-start: 0;
		padding 	: 0;
		font  		: #{12px/$rem_size}em/#{($grid_size/12px)} -apple-system, BlinkMacSystemFont, 'Microsoft YaHei', Helvetica, sans-serif;
		color: $tag-border_color;
		text-align 	: center;
		vertical-align: middle;
	}
}

#coffee, #black-tea{
	.h-product { 
		width: #{$grid_size/$rem_size}em;
		margin-left: #{($grid_size/$rem_size)}em; 
	}

	.p-name { @include text__shadow; }
	.spec-tag { padding: 0; width: $grid_size; }
}

#coffee div.group {
	.h-product { margin-bottom: #{($grid_size/2/$rem_size)}em; }
	.h-product:nth-of-type(1) { margin-left: #{(0.5*$grid_size/$rem_size)}em; }

	.p-spec {
		position  : relative;
		-webkit-margin-after: #{$row_height/2/12px}em;
		margin-bottom: 8px;
		outline   : 1px dashed $tag-border_color;
	}
	.p-spec.isSelected { outline-style: solid; }
	.p-spec.isSelected:before { 
		content: "✓";
		display: block;
		width: $grid_size;
		height: $grid_size;
		font 	: #{(18px/12px)}em/#{($grid_size/18px)} "Lucida Grande";
		word-spacing: 0;
		color 	: white;
		background-color: $tag-border_color;
	}

	background-image: 
		linear-gradient(to right, $border_bg, $border_bg 1px, transparent 1px, transparent #{(($grid_size - 1px)/$rem_size)}em),
		linear-gradient($border_bg, $border_bg 1px, transparent 1px, transparent #{(($grid_size - 1px)/$rem_size)}em);
	background-size: 
		#{($grid_size/$rem_size)}em #{($grid_size/$rem_size)}em,
		100% #{($grid_size/$rem_size)}em;
	background-position	: -#{($grid_size/2/$rem_size)}em -#{($grid_size/2/$rem_size)}em; 
	background-origin 	: content-box;
	background-clip 	: content-box;
}

#black-tea div.group {
 	.p-name { min-height: #{4.5*$grid_size/$rem_size}em; }
	.spec-price, .qty {position:relative; display: block}

	.qty:before,
	.spec-price:before{ 
		content: "";
		display: block;
		position: absolute;
		width: 100%;
		height: 100%;
		color: $tag-border_color;
		outline   : 1px dashed $tag-border_color;
		transform : rotateZ(45deg) skew(-5deg, -5deg);
	}
	.p-spec.isSelected { .spec-price:before, .qty:before { outline-style: solid; } }
	
	background-image: 
		repeating-linear-gradient(30deg, rgba(255,255,255,.1), rgba(255,255,255,.1) 1px, transparent 1px, transparent 2*$grid_size),
		repeating-linear-gradient(-30deg, rgba(255,255,255,.1), rgba(255,255,255,.1) 1px, transparent 1px, transparent 2*$grid_size),
		linear-gradient(-30deg, rgba(0,0,0,.1) 25%, transparent 25%, transparent 75%, rgba(0,0,0,.1) 75%, rgba(0,0,0,.1)),
		linear-gradient(30deg, rgba(0,0,0,.1) 25%, transparent 25%, transparent 75%, rgba(0,0,0,.1) 75%, rgba(0,0,0,.1));
	background-size: #{($grid_size/$rem_size)}em #{(2*$grid_size/$rem_size)}em;
	background-position	: -#{($grid_size/$rem_size)}em -#{($grid_size/$rem_size)}em; 
}

#ice-tea div.group {
	justify-content: space-between;

	.h-product { 
		position: relative;
		max-width: 25%;
		margin-left: 0; 
		padding-top: #{48px/$rem_size}em;
		padding-bottom: #{$grid_size/$rem_size}em;

		&:after,
		&:before,
		.p-name:after,
		.p-name:before { 
			display : block;
			position: absolute;
			left: 50%;
			transform: translateX(-50%);
			font-family: "HanziPen SC";
			color 	: initial;
			@include text__shadow;
			//@include bubble__gradient;
			border  : 1px dashed $border_bg;
			border-radius: 100%;
		}

		&.isSelected {
			&:after,
			&:before,
			.p-name:after,
			.p-name:before { border-style: solid; }
		}

		&:before { 
			top:0; 
			width : #{$row_height/$rem_size}em;
			height: #{$row_height/$rem_size}em;
			transform: translateX(-50%);
			font  : #{18px/$rem_size}em/#{($row_height/18px)} "HanziPen SC";
			text-align: center;
		}
		&:after {
			top:  #{(48px + 1.5*$grid_size + 1.5*$grid_size + 0.5*$grid_size)/18px}em;
			width : #{1.8*$grid_size/$rem_size}em;
			height: #{1.8*$grid_size/$rem_size}em; 
			line-height: #{1.2*$grid_size/$rem_size}em; 
			font  : #{18px/$rem_size}em/#{($row_height/18px)} "HanziPen SC";
			text-align: center;
		}
	}

	.p-name {
		position 	: relative;
		width 		: 1em;
		height 		: #{(1.5*$grid_size + 1.5*$grid_size + 0.5*$grid_size + 0.5*$grid_size + 1.8*$grid_size)/18px}em;
		margin 		: 0 auto;
		color 		: transparent;

		&:before { 
			width : #{$grid_size/18px}em;
			height: #{$grid_size/18px}em;
			line-height: #{$grid_size/18px}em;
			transform: translateX(-50%);
			text-align: center;
		}

		&:after { 
			top: 	#{1.5*$grid_size/18px}em;
			width : #{1.5*$grid_size/18px}em;
			height: #{1.5*$grid_size/18px}em;
			line-height: #{1.2*$grid_size/18px}em;
		}
	}

	.p-spec {
		display: block;
		position: relative;
		//width : #{2*$grid_size/12px}em;
		height: #{2*$grid_size/12px}em;
		line-height: #{2*$grid_size/12px}em;
		margin-bottom: 0.5em;
		border: 1px dashed $tag-border_color;
		border-radius: 100%;
	}
	.p-spec.isSelected { border-style: solid; }

	.spec-price, .qty { display: inline-block; }
	.qty { 
		position: absolute;
		top: 50%;
		left: 50%;
		line-height: 3;
		transform: translateX(-50%);
	}

	.h-product:nth-of-type(1):before { content: "荔"}
	.h-product:nth-of-type(1) .p-name:before { content: "枝"; }
	.h-product:nth-of-type(1) .p-name:after { content: "芦"; }
	.h-product:nth-of-type(1):after { content: "荟"}

	.h-product:nth-of-type(2):before { content: "青"}
	.h-product:nth-of-type(2) .p-name:before { content: "柠"; }
	.h-product:nth-of-type(2) .p-name:after { content: "气"; }
	.h-product:nth-of-type(2):after { content: "水"}

	.h-product:nth-of-type(3):before { content: "火"}
	.h-product:nth-of-type(3) .p-name:before { content: "龙"; }
	.h-product:nth-of-type(3) .p-name:after { content: "果"; }

	.h-product:nth-of-type(4):before { content: "清"}
	.h-product:nth-of-type(4) .p-name:before { content: "香"; }
	.h-product:nth-of-type(4) .p-name:after { content: "玫"; }
	.h-product:nth-of-type(4):after { content: "瑰"}
}

// laycat ///////////////////////////////////////
#lazycat .maps { 
	margin: auto auto;
	max-width : 100%; 
	height: auto;
}
